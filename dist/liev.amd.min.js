define(["exports"],(function(e){"use strict";const t=e=>"string"==typeof e,n=e=>"function"==typeof e,c=e=>e instanceof HTMLElement,o=new WeakMap,l=(e,l,r,{once:s,element:a=document.documentElement}={})=>{if(!(t(e)&&t(l)&&n(r)&&c(a)))return console.warn("couldn't detach listener."),!1;const u=o.get(a);if(!u)return!1;const d=u[e];if(!d)return!1;const i=d.findIndex(e=>e.selector===l&&e.callback===r&&e.once===s);return-1!==i&&(1===d.length?(a.removeEventListener(e,d.handler),delete u[e],!0):(d.splice(i,1),!0))},r=(e,t)=>{const n=((e,t)=>n=>{o.get(e)[t].forEach(({selector:c,callback:o,once:r})=>{const s=c?n.target.closest(c):n.target;s&&(o(s,n),r&&l(t,c,o,{once:r,element:e}))})})(e,t);o.get(e)[t].handler=n,e.addEventListener(t,n)};e.emit=(e,n=document.documentElement,o)=>!(!c(n)||!t(e))&&(n.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:o})),!0),e.off=l,e.on=(e,l,s,{once:a,element:u=document.documentElement}={})=>{if(!(t(e)&&t(l)&&n(s)&&c(u)))return console.warn("couldn't attach listener."),!1;const d={selector:l,callback:s,...a&&{once:a}},i=o.get(u);if(!i)return o.set(u,{[e]:[d]}),r(u,e),!0;const f=i[e];return f?(f.push(d),!0):(i[e]=[d],r(u,e),!0)},Object.defineProperty(e,"__esModule",{value:!0})}));
