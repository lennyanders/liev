var liev=function(e){"use strict";const t=e=>"string"==typeof e,n=e=>"function"==typeof e,c=e=>e instanceof HTMLElement,o=new WeakMap,r=(e,r,l,{once:s,element:a=document.documentElement}={})=>{if(!(t(e)&&t(r)&&n(l)&&c(a)))return console.warn("couldn't detach listener."),!1;const u=o.get(a);if(!u)return!1;const i=u[e];if(!i)return!1;const d=i.findIndex(e=>e.selector===r&&e.callback===l&&e.once===s);return-1!==d&&(1===i.length?(a.removeEventListener(e,i.handler),delete u[e],!0):(i.splice(d,1),!0))},l=(e,t)=>{const n=((e,t)=>n=>{o.get(e)[t].forEach(({selector:c,callback:o,once:l})=>{const s=c?n.target.closest(c):n.target;s&&(o(s,n),l&&r(t,c,o,{once:l,element:e}))})})(e,t);o.get(e)[t].handler=n,e.addEventListener(t,n)};return e.emit=(e,n=document.documentElement,o)=>!(!c(n)||!t(e))&&(n.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:o})),!0),e.off=r,e.on=(e,r,s,{once:a,element:u=document.documentElement}={})=>{if(!(t(e)&&t(r)&&n(s)&&c(u)))return console.warn("couldn't attach listener."),!1;const i={selector:r,callback:s,...a&&{once:a}},d=o.get(u);if(!d)return o.set(u,{[e]:[i]}),l(u,e),!0;const m=d[e];return m?(m.push(i),!0):(d[e]=[i],l(u,e),!0)},e}({});
